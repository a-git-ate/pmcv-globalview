<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2D Million Node Graph - TypeScript</title>
  </head>
  <body>
    <!-- Project Task Bar -->
    <div id="project-taskbar">
      <div id="project-tabs"></div>
      <button id="btn-check-model" class="check-button" disabled>Check Model</button>
      <button id="btn-reset-model" class="reset-button" disabled>Reset Model</button>
    </div>

    <!-- Debug Menu -->
    <div id="debug-menu" class="hidden">
      <div class="panel-header">
        <strong>Debug Information</strong>
        <button id="btn-close-debug" class="close-btn">×</button>
      </div>
      <div id="debug-content">
        <div class="debug-section">
          <div class="debug-section-title">Status</div>
          <div id="debug-status">Initializing...</div>
          <div id="debug-api-status">API: Not checked</div>
          <div id="debug-model-info">Model: None loaded</div>
        </div>

        <div class="debug-section">
          <div class="debug-section-title">Graph Info</div>
          <div id="debug-node-count">Nodes: 0</div>
          <div id="debug-edge-count">Edges: 0</div>
          <div id="debug-layout">Layout: None</div>
        </div>

        <div class="debug-section">
          <div class="debug-section-title">Three.js Renderer</div>
          <div id="debug-renderer-info">Loading...</div>
          <div id="debug-memory-info">Memory: N/A</div>
        </div>

        <div class="debug-section">
          <div class="debug-section-title">Performance</div>
          <div id="debug-render-time">Render Time: 0ms</div>
          <div id="debug-fps">FPS: 0</div>
        </div>

        <div class="debug-section">
          <div class="debug-section-title">Camera</div>
          <div id="debug-zoom">Zoom: 1.0x</div>
          <div id="debug-pan">Pan: (0, 0)</div>
        </div>

        <div class="debug-section">
          <div class="debug-section-title">Controls</div>
          <div>Mouse: Orbit camera</div>
          <div>Wheel: Zoom</div>
          <div>Click: Select node</div>
        </div>
      </div>
    </div>

    <div id="container">

      <div id="controls">
        <div><strong>Controls</strong></div>
        <button id="btn-load-api">Load Graph (ID: 0)</button>
        <br>
        <div style="margin: 5px 0; font-size: 11px;">
          <input type="text" id="project-id" placeholder="PRISM Project ID" style="width: 120px; padding: 2px;">
          <input type="text" id="view-ids" placeholder="View IDs (1,2,3)" style="width: 100px; padding: 2px;">
          <br>
          <button id="btn-load-prism">Load PRISM Project</button>
          <button id="btn-api-health">Check API</button>
        </div>
        <button id="btn-1k">1K Nodes</button>
        <button id="btn-10k">10K Nodes</button>
        <button id="btn-100k">100K Nodes</button>
        <br>
        <button id="btn-500k">500K Nodes</button>
        <button id="btn-1m">1M Nodes</button>
        <br>
        <button id="btn-force-directed" class="layout-btn">Force-Directed Layout</button>
        <br>
        <button id="btn-lod">Toggle LOD</button>
        <button id="btn-edges">Toggle Edges</button>
        <button id="btn-reset">Reset View</button>
        <br>
        <button id="btn-clusters">Cluster Mode</button>
        <button id="btn-gridlines">Toggle Grid</button>
        <button id="btn-export">Export PNG</button>
        <br><br>
        <div style="border-top: 1px solid #666; padding-top: 10px; margin-top: 10px;">
          <div><strong>Parameter View</strong></div>
          <div style="margin: 5px 0; font-size: 11px;">
            X-Axis:
            <select id="param-x-select" style="width: 60px; padding: 1px;">
              <option value="0">P0</option>
              <option value="1">P1</option>
              <option value="2">P2</option>
              <option value="3">P3</option>
              <option value="4">P4</option>
              <option value="5">P5</option>
              <option value="6">P6</option>
              <option value="7">P7</option>
              <option value="8">P8</option>
              <option value="9">P9</option>
            </select>
            Y-Axis:
            <select id="param-y-select" style="width: 60px; padding: 1px;">
              <option value="0">P0</option>
              <option value="1" selected>P1</option>
              <option value="2">P2</option>
              <option value="3">P3</option>
              <option value="4">P4</option>
              <option value="5">P5</option>
              <option value="6">P6</option>
              <option value="7">P7</option>
              <option value="8">P8</option>
              <option value="9">P9</option>
            </select>
            <br>
            Color:
            <select id="param-color-select" style="width: 60px; padding: 1px;">
              <option value="-1">None</option>
              <option value="0">P0</option>
              <option value="1">P1</option>
              <option value="2" selected>P2</option>
              <option value="3">P3</option>
              <option value="4">P4</option>
              <option value="5">P5</option>
              <option value="6">P6</option>
              <option value="7">P7</option>
              <option value="8">P8</option>
              <option value="9">P9</option>
            </select>
          </div>
          <button id="btn-apply-params">Apply Parameters</button>
          <br>
          <button id="btn-apply-color">Apply Color Only</button>
          <button id="btn-reset-layout">Reset Layout</button>
        </div>

        <!-- Parameter Status Section (Collapsible) -->
        <div style="border-top: 1px solid #666; margin-top: 15px; padding-top: 10px;">
          <button id="btn-toggle-param-status" style="width: 100%; background: #3498db;">
            <strong>▼ Parameter Status</strong>
          </button>
          <div id="param-status-content" class="hidden" style="margin-top: 10px; max-height: 300px; overflow-y: auto;"></div>
        </div>

        <!-- Debug & Utility Buttons -->
        <div style="border-top: 1px solid #666; margin-top: 15px; padding-top: 10px;">
          <button id="btn-toggle-debug" class="debug-button" style="width: 100%;">Debug Info</button>
        </div>
      </div>
      
      <div id="progress" class="hidden">
        <div id="progress-bar"></div>
      </div>

      <div id="node-tooltip" class="hidden"></div>
    </div>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>